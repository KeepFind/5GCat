{% extends 'base/_layout_content.html' %}
{% load staticfiles %}

{% block style %}
    <link href="{% static 'js/plugins/multiselect/style.css' %}" rel="stylesheet"/>
{% endblock %}


{% block content %}
    <div class="wrapper wrapper-content">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>用户授权</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <form method="post" class="form-horizontal">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="col-sm-1-5 control-label">用户：</label>
                        <div class="col-sm-9-5">
                            {{ form.username }}
                            {% autoescape off %}
                                {{ error.username }}
                            {% endautoescape %}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-1-5 control-label">角色：</label>
                        <div class="row">
                            <div class="col-xs-4">
{#                                <h5>所有角色</h5>#}
                                {{ form.groups_all }}
                            </div>
                            <div class="col-xs-1">
{#                                <h5>test</h5>#}
                                <button type="button" id="js_right_All_1" class="btn btn-block"><i
                                        class="glyphicon glyphicon-forward"></i>
                                </button>
                                <button type="button" id="js_right_Selected_1" class="btn btn-block"><i
                                        class="glyphicon glyphicon-chevron-right"></i></button>
                                <button type="button" id="js_left_Selected_1" class="btn btn-block"><i
                                        class="glyphicon glyphicon-chevron-left"></i></button>
                                <button type="button" id="js_left_All_1" class="btn btn-block"><i
                                        class="glyphicon glyphicon-backward"></i>
                                </button>
                            </div>
                            <div class="col-xs-4">
{#                                <h5>选中的角色</h5>#}
                                {{ form.groups }}
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-1-5 control-label">权限：</label>
                        <div class="row">
                            <div class="col-xs-4">
{#                                <h5>所有权限</h5>#}
                                {{ form.permissions_all }}
                            </div>
                            <div class="col-xs-1">
{#                                <h5>test</h5>#}
                                <button type="button" id="js_right_All_2" class="btn btn-block"><i
                                        class="glyphicon glyphicon-forward"></i>
                                </button>
                                <button type="button" id="js_right_Selected_2" class="btn btn-block"><i
                                        class="glyphicon glyphicon-chevron-right"></i></button>
                                <button type="button" id="js_left_Selected_2" class="btn btn-block"><i
                                        class="glyphicon glyphicon-chevron-left"></i></button>
                                <button type="button" id="js_left_All_2" class="btn btn-block"><i
                                        class="glyphicon glyphicon-backward"></i>
                                </button>
                            </div>
                            <div class="col-xs-4">
{#                                <h5>选中的权限</h5>#}
                                {{ form.permissions }}
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9-5">
                            <button class="btn btn-info" type="submit" id="btnSave">保存</button>
                            <button class="btn btn-white" type="button" id="btnBack" data-type="url">返回</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{% static 'js/plugins/multiselect/multiselect.js' %}"></script>

    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $('select[name=groups_all]').removeAttr('name');
            $('select[name=permissions_all]').removeAttr('name');

            $('.js-multiselect1').multiselect({
                right: '#js_multiselect_to_1',
                rightAll: '#js_right_All_1',
                rightSelected: '#js_right_Selected_1',
                leftSelected: '#js_left_Selected_1',
                leftAll: '#js_left_All_1'
            });

            $('.js-multiselect2').multiselect({
                right: '#js_multiselect_to_2',
                rightAll: '#js_right_All_2',
                rightSelected: '#js_right_Selected_2',
                leftSelected: '#js_left_Selected_2',
                leftAll: '#js_left_All_2'
            });
        });
    </script>
{% endblock %}
